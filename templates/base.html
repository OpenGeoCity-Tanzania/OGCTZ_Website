<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>{% block title %}{% endblock %} | {{ site_name }}</title>
    
    <!-- Favicon Links with IDs for dynamic switching -->
    <link id="icon-ico" rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/favicons/fav_org/favicon.ico') }}">
    <link id="icon32" rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicons/fav_org/favicon-32x32.png') }}">
    <link id="icon16" rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicons/fav_org/favicon-16x16.png') }}">
    <link id="apple-touch" rel="apple-touch-icon" href="{{ url_for('static', filename='img/favicons/fav_org/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='img/favicons/fav_org/site.webmanifest') }}">
    <meta name="theme-color" content="#0ea5e9">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#0f172a',   /* Slate 900 */
                            primary: '#0ea5e9', /* Sky 500 */
                            accent: '#10b981',  /* Emerald 500 */
                            light: '#f8fafc',   /* Slate 50 */
                        }
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script defer src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/effects.js') }}"></script>
    
    {% include 'includes/analytics.html' ignore missing %}
</head>
<body class="bg-brand-light dark:bg-brand-dark text-slate-700 dark:text-slate-100 font-sans flex flex-col min-h-screen transition-colors duration-300">

    {% include 'includes/header.html' %}

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="max-w-7xl mx-auto px-4 mt-4">
                {% for category, message in messages %}
                    <div class="p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg border border-green-200" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <main class="flex-grow">
        {% block content %}{% endblock %}
    </main>

    {% include 'includes/news_letter.html' %}

    {% include 'includes/footer.html' %}

    <script>
        // Mobile Menu Toggle Logic
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');

        if(btn && menu){
            btn.addEventListener('click', () => {
                menu.classList.toggle('hidden');
            });
        }
    </script>
</body>
</html>